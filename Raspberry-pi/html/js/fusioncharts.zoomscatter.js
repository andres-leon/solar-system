/*
 FusionCharts JavaScript Library - KDtree
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.0
 FusionCharts JavaScript Library - ZoomScatter Chart
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.0
*/
(function(N){"object"===typeof module&&"undefined"!==typeof module.exports?module.exports=N:N(FusionCharts)})(function(N){N.register("module",["private","modules.renderer.js-kdtree",function(){function K(e){function n(e,H,y,q){var p={},t;t=q?"y":"x";if(H===y)return p.point=e[H],p;if(1===y-H)return e[H][t]>e[y][t]?(p.point=e[H],p.left={point:e[y]}):(p.point=e[y],p.left={point:e[H]}),p;t=H+y>>1;q?r(e,t,H,y):O(e,t,H,y);p.point=e[t];p.left=n(e,H,t-1,!q);p.right=n(e,t+1,y,!q);return p}function O(e,n,y,
k){for(var p,t,g,v,r;k>y;){600<k-y&&(p=k-y+1,t=n-y+1,g=I(p),v=.5*L(2*g/3),r=.5*B(g*v*(p-v)/p)*(0>t-p/2?-1:1),g=w(y,A(n-t*v/p+r)),p=E(k,A(n+(p-t)*v/p+r)),O(e,n,g,p));p=e[n];t=y;v=k;q(e,y,n);for(e[k].x>p.x&&q(e,y,k);t<v;){q(e,t,v);t++;for(v--;e[t].x<p.x;)t++;for(;e[v].x>p.x;)v--}e[y].x===p.x?q(e,y,v):(v++,q(e,v,k));v<=n&&(y=v+1);n<=v&&(k=v-1)}}function r(e,n,k,g){for(var p,t,O,v,C;g>k;){600<g-k&&(p=g-k+1,t=n-k+1,O=I(p),v=.5*L(2*O/3),C=.5*B(O*v*(p-v)/p)*(0>t-p/2?-1:1),O=w(k,A(n-t*v/p+C)),p=E(g,A(n+(p-
t)*v/p+C)),r(e,n,O,p));p=e[n];t=k;v=g;q(e,k,n);for(e[g].y>p.y&&q(e,k,g);t<v;){q(e,t,v);t++;for(v--;e[t].y<p.y;)t++;for(;e[v].y>p.y;)v--}e[k].y===p.y?q(e,k,v):(v++,q(e,v,g));v<=n&&(k=v+1);n<=v&&(g=v-1)}}function q(e,n,k){var g=e[n];e[n]=e[k];e[k]=g}var k=e&&e[0]&&e[0].r||5,g,w=Math.max,A=Math.floor,B=Math.sqrt,E=Math.min,I=Math.log,L=Math.exp,C=Math.pow;e=e||[];for(g=e.length;g--;)e[g].r>k&&(k=e[g].r),e[g].i=g,e[g].x=+e[g].x,e[g].y=+e[g].y;return{tree:0===e.length?{}:n(e,0,e.length-1,!1),search:function(e,
n,g){function q(f,h){return"circle"===g?B(C(f-e,2)+C(h-n,2))<=c:f>=c&&f<=b&&h>=a&&h<=d}function p(a){var b=e>=a.x1&&e<=a.x2&&n>=a.y1&&n<=a.y2,d;d=a.point.y;d=B(C(e-a.point.x,2)+C(n-d,2));r?b?f?a.point.i>r.point.i&&(r=a,f=b,h=d):(r=a,f=b,h=d):!f&&d<h&&(r=a,f=b,h=d):(r=a,f=b,h=d)}function t(f){"circle"===g?c=f:(c=e-f||0,b=e+f||0,a=n-f||0,d=n+f||0)}function O(a){a&&a.point&&(t(a.point.r),q(a.point.x,a.point.y)&&p(a),c<=a.point.x&&v(a.left),b>=a.point.x&&v(a.right))}function v(b){b&&b.point&&(t(b.point.r),
q(b.point.x,b.point.y)&&p(b),a<=b.point.y&&O(b.left),d>=b.point.y&&O(b.right))}var r,c=e-k,b=e+k,a=n-k,d=n+k,f=!1,h=0;O(this.tree);return r&&r.point||r}}}function g(e){this.configure(e)}var N=this.hcLib,S=function(e,n,g,r,q){return Math.pow(g-e,2)+Math.pow(r-n,2)<=Math.pow(q,2)},W=Math.PI,Z=Math.cos,ba=Math.sin,X=Math.max,Q=Math.min,T=W/180,w=function(e,n,g,r,q,k){return g<=X(e,q)&&g>=Q(e,q)&&r<=X(n,k)&&r>=Q(n,k)?!0:!1},I=function(e,n,g,r,q,k){n=(r-n)*(q-g);e=(g-e)*(k-r);isNaN(n)&&(n=0);isNaN(e)&&
(e=0);e=n-e;return 0===e?0:0<e?1:2};g.prototype={configure:function(e){this.validatorFn=e?this.shapeValidator():this.defaultValidator()},defaultValidator:function(){var e=this;return function(n){var g=e.mousePoint;return n&&1>=Math.pow((n.x-g.x)/e.xLimit,2)+Math.pow((n.y-g.y)/e.yLimit,2)?!0:!1}},shapeValidator:function(){var e=this;return function(n){var g=e.mousePoint,r=n&&n.shapeInfo,q=!1,k,P=g.x,g=g.y,J;switch(r&&r.type){case "circle":k=r.radius;q=S(P,g,n.x,n.y,k);break;case "arc":q=r.innerradius;
k=r.radius;q=!S(P,g,n.x,n.y,q)&&S(P,g,n.x,n.y,k);break;case "polygon":k=r.radius;J=r.startAngle;r=r.sides;a:{q=n.x;n=n.y;var A,B=0,E,K,L,C,Q;A=!1;if(S(P,g,q,n,k)&&3<=r){A=void 0===J?.5*W:J%360*T;Q=2*W/r;E=q+k*Z(-A);C=n+k*ba(-A);for(J=0;J<r;J++){A+=Q;K=q+k*Z(-A);L=n+k*ba(-A);var H=E,y=C,N=K,p=L,t=P,M=g,v=g,X=I(H,y,N,p,t,M),c=I(H,y,N,p,Infinity,v),b=I(t,M,Infinity,v,H,y),a=I(t,M,Infinity,v,N,p);if(X!==c&&b!==a||0===X&&w(H,y,t,M,N,p)||0===c&&w(H,y,Infinity,v,N,p)||0===b&&w(t,M,H,y,Infinity,v)||0===a&&
w(t,M,N,p,Infinity,v)){if(0===I(E,C,P,g,K,L)){q=w(E,C,P,g,K,L);break a}B++}E=K;C=L}A=0!==B%2}q=A}break;case "rect":q=n.x;k=n.y;n=q+(r.width||0);r=k+(r.height||0);q=P>=q&&P<=n&&g>=k&&g<=r;break;case "default":q=!1}return q}},buildKdTree:function(e){this.kdTree=K(e);this.tree=this.kdTree.tree;return this},getNeighbour:function(e,g,w){var r=this.tree,q={x1:e.x-this.xLimit,x2:e.x+this.xLimit,y1:e.y-this.yLimit,y2:e.y+this.yLimit},k=this.validatorFn;this.mousePoint=e;if(g)return this.kdTree&&this.kdTree.search(e.x,
e.y,w);if(r)return this._searchBtwnLimit(q,r,!0,k)},_compair2closest:function(e,g){return!e||e&&g&&g.i>e.i?g:e},_searchBtwnLimit:function(e,g,w,r){var q,k,I=w?e.x1:e.y1,J=w?e.x2:e.y2;q=g&&g.point&&g.point[w?"x":"y"];if(void 0!==q)return r(g.point)&&(k=g.point),q>=I&&g.left&&(k=this._compair2closest(k,this._searchBtwnLimit(e,g.left,!w,r))),q<=J&&g.right&&(k=this._compair2closest(k,this._searchBtwnLimit(e,g.right,!w,r))),k},_setSearchLimit:function(e,g){this.xLimit=e;this.yLimit=g}};g.prototype.constructor=
g;N.KdTree=g}]);N.register("module",["private","modules.renderer.js-zoomscatter",function(){var K=this,g=K.hcLib,ea=g.parseTooltext,S=g.Raphael,W=K.window,Z=g.addEvent,ba=g.removeEvent,X=W.MouseEvent,Q=W.document,T=g.BLANKSTRING,w=g.pluck,I=g.pluckNumber,e=g.getFirstValue,n=g.toRaphaelColor,O=g.hasSVG,r=g.isIE,q=g.getFirstColor,k=g.hasTouch,P="rgba(192,192,192,"+(r?.002:1E-6)+")",J=Math,A=J.round,B=J.min,E=J.max,aa=J.abs,L=J.cos,C=J.sin,ca=J.floor,H=2*Math.PI,y=g.getMouseCoordinate,fa=g.POSITION_BOTTOM,
p=g.chartAPI,t=g.HUNDREDSTRING,J=!g.CREDIT_REGEX.test(W.location.hostname),M=function(c,b){var a=y(b.linkedItems.container,c),d=a.chartX,f=a.chartY,h=b.config,G=h.canvasLeft,z=h.canvasTop,l=h.canvasLeft+h.canvasWidth,h=h.canvasHeight+h.canvasTop;a.insideCanvas=!1;a.originalEvent=c;d>G&&d<l&&f>z&&f<h&&(a.insideCanvas=!0);return a},v=function(c,b,a){var d;b&&c&&(a||(a={}),a.originalEvent&&(a=a.originalEvent),a.touches&&(a=a.touches[0]),b.dispatchEvent?(X?d=new X(c,{bubbles:!!a.bubbles,cancelable:!!a.cancelable,
clientX:a.clientX||a.pageX&&a.pageX-Q.body.scrollLeft-Q.documentElement.scrollLeft||0,clientY:a.clientY||a.pageY&&a.pageY-Q.body.scrollTop-Q.documentElement.scrollTop||0,screenX:a.screenX||0,screenY:a.screenY||0,pageX:a.pageX||0,pageY:a.pageY||0}):Q.createEvent&&(d=Q.createEvent("HTMLEvents"),d.initEvent(c,!!a.bubbles,!!a.cancelable)),d.eventName=c,d&&b.dispatchEvent(d)):Q.createEventObject&&b.fireEvent&&(d=Q.createEventObject(),d.eventType=c,d.eventName=c,b.fireEvent("on"+c,d)))},da=g.KdTree;p("zoomscatter",
{standaloneInit:!0,defaultDatasetType:"zoomscatter",applicableDSList:{zoomscatter:!0},highlightEnabled:!1,friendlyName:"ZoomScatter Chart",isXY:!0,defaultZeroPlaneHighlighted:!1,creditLabel:J,configure:function(){var c,b=this.config;p.scatter.configure.apply(this,arguments);c=this.jsonData.chart;b.stepZoom=1-I(c.stepzoom,25)/100;b.showToolBarButtonToolText=I(c.showtoolbarbuttontooltext,1);b.btnResetChartToolText=w(c.btnresetcharttooltext,"Reset Chart");b.btnZoomOutToolText=w(c.btnzoomouttooltext,
"Zoom out to previous level");b.btnZoomInToolText=w(c.btnzoomintooltext,"<strong>Zoom in</strong><br/>Or double-click on plot to zoom-in");b.btnSelectZoomToolText=w(c.btnselectzoomtooltext,"<strong>Select a region to zoom-in</strong><br/>Click to enable pan mode.");b.btnPanToolText=w(c.btnpantooltext,"<strong>Drag to move across chart</strong><br/>Click to enable select-zoom mode.")},_setAxisLimits:function(){var c=this.jsonData,b=this.components.xAxis,a=w(c.chart.xaxislabelmode,"categories"),c=c.categories&&
c.categories[0],c=(c&&c.category||[]).slice(),d,f=Infinity,h=-Infinity,G;if("auto"===a||0===c.length){p.mscartesian._setAxisLimits.call(this);a=b[0].getLimit();b[0].setAxisConfig({hasCategory:0});b[0].resetCategoryAxisComponents();for(d=0;d<c.length;d+=1)if(G=c[d].x)G<f&&(f=G),G>h&&(h=G);if(h>a.max||f<a.min)h=E(h,a.max),f=B(f,a.min),b[0].setDataLimit(h,f)}else b[0].resetNumericAxisComponents(),p.scatterBase._setAxisLimits.call(this)},_createAxes:function(){var c=this.components;p.scatter._createAxes.call(this,
arguments);c.yAxis[0].setAxisConfig({animateAxis:!1});c.xAxis[0].setAxisConfig({animateAxis:!1})},_spaceManager:function(){var c,b,a=this.config,d=this.components,f=d.xAxis&&d.xAxis[0];b=d.yAxis&&d.yAxis||[];var h,G,z=d.legend.config.legendPos,l=a.xDepth,m=a.yDepth,e=a.canvasBgDepth,g=a.canvasBaseDepth,n=a.canvasBasePadding,D=d.canvas.config.canvasBorderWidth,k=a.realTimeConfig&&a.realTimeConfig.showRTValue,u=a.borderWidth,U=a.canvasMarginTop,V=a.canvasMarginBottom,x=a.canvasMarginLeft,R=a.canvasMarginRight,
d=a.minCanvasHeight,p=a.minCanvasWidth;c=a.minChartWidth;var q=a.minChartHeight,r=a.height,v=a.width,t=a._initConfig||(a._initConfig={}),w=!1,B=a.origCanvasTopMargin,y=a.origCanvasBottomMargin,A,E,C=[];t.canvasLeft=a.canvasLeft;t.canvasWidth=a.canvasWidth;t.canvasHeight=a.canvasHeight;t.canvasTop=a.canvasTop;t.availableHeight=a.availableHeight;t.availableWidth=a.availableWidth;a.canvasWidth-2*u<c&&(G=(a.canvasWidth-c)/2);a.canvasHeight-2*u<q&&(h=(a.canvasHeight-q)/2);this._allocateSpace({top:h||u,
bottom:h||u,left:G||u,right:G||u});a.origCanvasWidth=a.canvasWidth;a.origCanvasLeft=a.canvasLeft;a.canvasRight=a.canvasLeft+a.canvasWidth;a.origCanvasRight=a.canvasRight;u=0;for(G=b.length;u<G;u++)h=b[u],c=.7*a.availableWidth,c=h&&h.placeAxis(c)||{},C.push({axisIndex:u,spaceTaken:c}),h&&this._allocateSpace(c);b=.7*a.canvasHeight;this._manageActionBarSpace&&this._allocateSpace(this._manageActionBarSpace(b));this._manageLegendSpace(void 0);m&&(this._allocateSpace({bottom:m}),a.shift=l+n+g);e&&this._allocateSpace({right:e});
a.canvasWidth-2*D<p&&(E=(a.canvasWidth-p)/2);this._allocateSpace({left:E||D,right:E||D});p>v-x-R&&(m=a.canvasWidth-p,l=x+R,x=a.canvasMarginLeft=m*x/l,R=a.canvasMarginRight=m*R/l);x=x>a.canvasLeft?x-a.canvasLeft:0;this._allocateSpace({left:x,right:R>v-a.canvasRight?R+a.canvasRight-v:0});b=z===fa?.6*a.canvasHeight:.6*a.canvasWidth;this._manageChartMenuBar(b);b=.2*a.availableHeight;this._allocateSpace(this._getSumValueSpace(b));b=.3*a.availableHeight;a.origCanvasHeight=a.canvasHeight;a.canvasBottom=
a.canvasTop+a.canvasHeight;a.origCanvasBottom=a.canvasBottom;a.origCanvasTop=a.canvasTop;a.realtimeEnabled&&(k?this._allocateSpace(this._realTimeValuePositioning(b)):this._hideRealTimeValue());b=.6*a.availableHeight;a.xAxisSpaceAllocation=z=f&&f.placeAxis(b);f&&this._allocateSpace(z);this._getDSspace&&this._allocateSpace(this._getDSspace(.4*a.canvasWidth));b=.3*a.availableHeight;this._manageScrollerPosition&&this._manageScrollerPosition(b);a.canvasHeight-2*D<d&&(A=(a.canvasHeight-d)/2);this._allocateSpace({top:A||
D,bottom:A||D});this._allocateSpace({bottom:g});d>r-U-V&&(w=!0,m=a.canvasHeight-d,l=U+V,U=a.canvasMarginTop=m*U/l,V=a.canvasMarginBottom=m*V/l);f=U>a.canvasTop?U-a.canvasTop:0;g=V>r-a.canvasBottom?V+a.canvasBottom-r:0;this._allocateSpace({top:f,bottom:g});w&&(l=B+y,w=a.canvasHeight,w>d&&(m=w-d,f=m*B/l,g=m*y/l),this._allocateSpace({top:f,bottom:g}));a.actualCanvasMarginTop=f;a.actualCanvasMarginLeft=x},_createToolBox:function(){var c,b,a,d,f,h,G,z,l,m=this,e=m.config;d=m.components;c=d.chartMenuBar;
b=d.actionBar;l=e.showToolBarButtonToolText;var g=e.stepZoom;c&&c.drawn||b&&b.drawn||(p.mscartesian._createToolBox.call(m),c=d.tb,b=c.graphics||(c.graphics={}),a=c.getAPIInstances(c.ALIGNMENT_HORIZONTAL),a=a.Symbol,d=(d.chartMenuBar||d.actionBar).componentGroups[0],f=b.zoomInButton=(new a("zoomInIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){m.zoom(g)},tooltext:l&&e.btnZoomInToolText||T}),h=b.zoomOutButton=(new a("zoomOutIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){var a=
e.viewPortHistory;1<a.length&&(a=a.slice(-2,-1)[0],m.updateVisual(a.x,a.y,a.scaleX,a.scaleY))},tooltext:l&&e.btnZoomOutToolText||T}),G=b.resetButton=(new a("resetIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){var a=e.viewPortConfig,b=m.graphics;1<e.viewPortHistory.length&&(a.isReset=!0,m.zoomSelection(0,0,e.canvasWidth,e.canvasHeight),e.viewPortHistory.splice(1),b.trackerGroup.attr({cursor:"default"}),m.updateButtonVisual(),m.updateSelectionBox(0,0,0,0));K.raiseEvent("zoomReset",
{},m.chartInstance,[m.chartInstance.id])},tooltext:l&&e.btnResetChartToolText||T}),z=b.toggleZoomInButton=(new a("zoomModeIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){m.toogleDragPan(!0)},tooltext:l&&e.btnSelectZoomToolText||T}),l=b.togglePanButton=(new a("panModeIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){m.toogleDragPan(!0)},tooltext:l&&e.btnPanToolText||T}),d.addSymbol(l,!0),d.addSymbol(z,!0),d.addSymbol(G,!0),d.addSymbol(h,!0),d.addSymbol(f,
!0))},_createLayers:function(){var c=this.graphics,b=this.components.paper;p.scatter._createLayers.call(this);!c.imageContainer&&(c.imageContainer=b.group("dataset-orphan",c.datasetGroup));this.__preDraw()},_dist:function(c,b){var a=this.components,d;d=a.xAxis[0];a=a.yAxis[0];if(c&&b)return d=(c.x-b.x)*d.getPVR(),a=(c.y-b.y)*a.getPVR(),Math.sqrt(Math.pow(d,2)+Math.pow(a,2))},__preDraw:function(){var c=this.graphics,b=c.imageContainer,a=this.config,d=a.canvasLeft,f=a.canvasTop,h=a.canvasWidth,e=a.canvasHeight,
z=this.jsonData.chart,l=this.linkedItems,l=l.eventListeners||(l.eventListeners=[]),m=this.linkedItems.container,g=this.components.paper;a.updateAnimDuration=500;b.transform("t"+d+","+f);b.attr({"clip-rect":d+","+f+","+h+","+e});a.status="zoom";a.maxZoomLimit=I(z.maxzoomlimit,1E3);a.viewPortHistory=[{scaleX:1,scaleY:1,x:0,y:0}];!c.trackerElem&&(c.trackerElem=g.rect(d,f,h,e,0,c.trackerGroup).attr({fill:P,stroke:P}));ba(m,k?"touchstart":"mousemove",this.searchMouseMove);l.push(Z(m,"touchstart mousemove",
this.searchMouseMove,this));this.zoomPanManager(b)},searchMouseMove:function(c){var b,a,d,f=c.data,h=f.config,e=h.viewPortConfig;a=f.components;var z=a.xAxis[0],l=a.yAxis[0];f.linkedItems.container&&!h.isDragging&&((b=M(c,f))&&b.insideCanvas?(a=h.canvasTop,d=z.getAxisConfig("axisDimention").x||h.canvasLeft,e.lastMouseCoordinate={x:Number(z.getValue(b.chartX-d)),y:Number(l.getValue(b.chartY-a))},clearTimeout(e.neighbourSearchTimer),h.lastMouseEvent=c,e.neighbourSearchTimer=setTimeout(function(){h.isDragging||
f._bestNeighbour(e.lastMouseCoordinate)},100)):f.highlightPoint(!1))},updateSelectionBox:function(c,b,a,d){var f=this.config,h=this.graphics,e=this.components.paper,z=f.viewPortConfig,l=f.cursor,m=h.selectionBox,g=f.canvasRight,F=f.canvasLeft,n=f.canvasTop,D=f.canvasBottom,k=c<a?c:a,u=b<d?b:d,U=c>a?c:a,V=b>d?b:d,x=a-c,R=b-d,l=l?0<x&&0<R?"ne-resize":0>x&&0<R?"nw-resize":0>x&&0>R?"sw-resize":0<x&&0>R?"se-resize":"default":"default",k=k<F?F:k>g?g:k,u=u<n?n:u>D?D:u,x=c===a&&b===d?0:(U>g?g:U<F?F:U)-k,
R=c===a&&b===d?0:(V>D?D:V<n?n:V)-u;m?m.attr({x:k,y:u,width:x,height:R,cursor:l}):h.selectionBox=e.rect(k,u,x,R).attr({"stroke-width":1,stroke:"red",fill:"#00FF00",opacity:.2,cursor:l});h.trackerGroup.attr({cursor:l});f.cursor=l;z.selectionDimensions||(z.selectionDimensions={startX:0,endX:0,startY:0,endY:0});z.selectionDimensions.startX=c;z.selectionDimensions.endX=b;z.selectionDimensions.startY=a;z.selectionDimensions.endY=d},getValue:function(c){var b=this.config,a=this.components,d=b.viewPortConfig;
c=this.getOriginalPositions(c.x,c.y,c.x,c.y);var f=a.xAxis[0].config.axisRange,a=a.yAxis[0].config.axisRange,h=f.min,e=a.max;return{x:h+(c[0]-b.canvasLeft)/(b.canvasWidth*d.scaleX/(f.max-h)),y:e-(c[1]-b.canvasTop)/(b.canvasHeight*d.scaleY/(e-a.min))}},_getTouchViewPort:function(c,b,a){var d,f;f=this.config;var h=f.canvasLeft,e=f.canvasTop;d=f.canvasWidth;f=f.canvasHeight;var z=B(c[0].chartX,c[1].chartX)-h,l=B(c[0].chartY,c[1].chartY)-e,m=Math.abs(c[1].chartX-c[0].chartX);c=Math.abs(c[1].chartY-c[0].chartY);
var h=B(b[0].chartX,b[1].chartX)-h,g=B(b[0].chartY,b[1].chartY)-e,e=Math.abs(b[1].chartX-b[0].chartX)/m*a.scaleX;b=Math.abs(b[1].chartY-b[0].chartY)/c*a.scaleY;z=a.x+z/a.scaleX-h/e;a=a.y+l/a.scaleY-g/b;z=0>z?0:z;a=0>a?0:a;b=1>b?1:b;e=1>e?1:e;d-=d/e;f-=f/b;return{x:z>d?d:z,y:a>f?f:a,scaleX:e,scaleY:b}},getOriginalPositions:function(c,b,a,d){var f=this.config,h=f.viewPortConfig,e=h.scaleX,g=h.scaleY,l=h.x,h=h.y,m=B(c,a);c=E(c,a);a=B(b,d);b=E(b,d);c=c>f.canvasWidth?f.canvasWidth:c;b=b>f.canvasHeight?
f.canvasHeight:b;m=0>m?0:m;a=0>a?0:a;return[l+m/e,h+a/g,(c-m)/e,(b-a)/g]},zoomSelection:function(c,b,a,d){var f=this.config;a&&d&&(a=Math.abs(f.canvasWidth/a),d=Math.abs(f.canvasHeight/d),this.updateVisual(c,b,a,d))},toogleDragPan:function(c){var b=this.config,a=b.status;c&&(b.status="zoom"===a?"pan":"zoom",K.raiseEvent("zoomModeChanged",{panModeActive:b.status},this.chartInstance,[this.chartInstance.id]));this.updateButtonVisual()},updateManager:function(c){var b,a=this.components.dataset,d=a.length;
for(b=0;b<d;b+=1)a[b].draw(c);c||this._drawQuadrant()},zoomPanManager:function(){var c,b=[],a=[],d=this,f=d.config,h=d.graphics,e=d.components,g=e.xAxis[0],l=e.eventListeners||(e.eventListeners=[]),m=d.viewPortConfig,Y=!1,F=0,n,D={},p=function(a){var b=a.chartX,d=a.chartY,c=g.getAxisConfig("axisDimention").x||f.canvasLeft,h=f.canvasTop,e=f.canvasRight,l=f.canvasBottom;b<c&&(a.chartX=E(b,c));b>e&&(a.chartX=B(b,e));d<h&&(a.chartY=E(d,h));d>l&&(a.chartY=B(d,l))},u={start:function(a){m=f.viewPortConfig;
k=a.touches?!0:!1;b[0]=M(a,d);d.updateSelectionBox(0,0,0,0);k&&(Y=!1,c=a.touches.length,2===c&&(Y=!0,D.x=m.x,D.y=m.y,D.scaleX=m.scaleX,D.scaleY=m.scaleY,b[0]=M(a.touches.item(0),d),b[1]=M(a.touches.item(1),d)));f.isDragging=!1;"pan"===f.status&&(f.panStartX=m.x,f.panStartY=m.y,b[0].insideCanvas&&h.trackerGroup.attr({cursor:"move"}))},on:function(c){var l,g,z,F;z=f.panStartX;var n=f.panStartY;l=m.scaleX;g=m.scaleY;var u=e.xAxis[0],p=e.yAxis[0];k=c.touches?!0:!1;a[0]=M(c,d);a[0].insideCanvas?"pan"===
f.status&&h.trackerGroup.attr({cursor:"move"}):h.trackerGroup.attr({cursor:"default"});k&&c&&(F=c.touches.length,2===F?(Y=!0,a[0]=M(c.touches.item(0),d),a[1]=M(c.touches.item(1),d)):Y=!1);!f.isDragging&&(!k||2<aa(a[0].chartX-b[0].chartX)||2<aa(a[0].chartY-b[0].chartY))&&(f.isDragging=!0,d.highlightPoint(!1),"zoom"===f.status&&(b[0].pointValue=d.getValue({x:b[0].chartX,y:b[0].chartY}),K.raiseEvent("selectionStart",{chartX:b[0].chartX,chartY:b[0].chartY,pageX:b[0].pageX,pageY:b[0].pageY,selectionTop:b[0].chartX+
f.canvasLeft,selectionLeft:b[0].chartY+f.canvasTop,selectionWidth:0,selectionHeight:0,startXVAlue:b[0].pointValue.x,startYVAlue:b[0].pointValue.y},d.chartInstance,[d.chartInstance.id])));if(f.isDragging)if(Y){if(b[0].insideCanvas||b[1].insideCanvas)z=d._getTouchViewPort(b,a,D),d.updateVisual(z.x,z.y,z.scaleX,z.scaleY,!0)}else"zoom"===f.status?d.updateSelectionBox(b[0].chartX,b[0].chartY,a[0].chartX,a[0].chartY):"pan"!==f.status||1===l&&1===g||!b[0].insideCanvas||(c=b&&a[0].chartX-b[0].chartX,F=b&&
a[0].chartY-b[0].chartY,z-=c/l,n-=F/g,l=f.canvasWidth*(l-1)/l,g=f.canvasHeight*(g-1)/g,m.x=z>l?l:0>z?0:z,m.y=n>g?g:0>n?0:n,d.updateManager(),u.draw(),p.draw())},end:function(c){var e=M(c,d),l=g.getAxisConfig("axisDimention").x||f.canvasLeft,m=f.canvasTop,G;G=f.canvasWidth/4;var u=f.canvasHeight/4,e=isNaN(e.chartX)||isNaN(e.chartY)?a[0]||b[0]:e;if(f.isDragging){if(Y){if(b[0].insideCanvas||b[1].insideCanvas)c=d._getTouchViewPort(b,a,D),d.updateVisual(c.x,c.y,c.scaleX,c.scaleY);Y=!1}else"zoom"===f.status&&
(c=e,G=b[0],p(G),p(c),m=d.getOriginalPositions(G.chartX-l,G.chartY-m,c.chartX-l,c.chartY-m))&&(c.pointValue=d.getValue({x:c.chartX,y:c.chartY}),K.raiseEvent("selectionEnd",{chartX:c.chartX,chartY:c.chartY,pageX:c.pageX,pageY:c.pageY,selectionTop:c.chartX+f.canvasLeft,selectionLeft:c.chartY+f.canvasTop,selectionWidth:Math.abs(c.chartX-G.chartX),selectionHeight:Math.abs(c.chartY-G.chartY),startXVAlue:G.pointValue.x,startYVAlue:G.pointValue.y,endXValue:c.pointValue.x,endYValue:c.pointValue.y},d.chartInstance,
[d.chartInstance.id]),G.chartX!==c.chartX&&G.chartY!==c.chartY&&d.zoomSelection(m[0],m[1],m[2],m[3]),d.updateSelectionBox(0,0,0,0));f.isDragging=!1;c=a[0]||b[0];c.data=d;d.searchMouseMove(c)}else e.insideCanvas&&(F+=1,setTimeout(function(){F=0;n=void 0},500),2===F?(c&&c.touches?!0:!1)===n&&(l=e.chartX-l,m=e.chartY-m,m=d.getOriginalPositions(l-G,m-u,l+G,m+u),d.zoomSelection(m[0],m[1],m[2],m[3]),c.preventDefault()):n=c&&c.touches?!0:!1);h.trackerGroup.attr({cursor:"default"})}};l.push(Z(d.linkedItems.container,
"pointerdrag",function(a){u[a.state](a.originalEvent)}))},_drawDataset:function(){var c,b=this.components.dataset,a=b.length;for(c=0;c<a;c+=1)b[c]._deleteGridImages(),b[c].graphics._grid={};this.updateVisual()},updateVisual:function(c,b,a,d,f){var h,e,g,l,m;h=this.config;var n=this.components,F=h.viewPortConfig;m=h.canvasWidth;var k=h.canvasHeight,D=m,p=k,u=h.viewPortHistory,p=u.slice(-1)[0],q=[],q=h.status,r=h._initConfig;e=n.xAxis[0];l=n.yAxis[0];g=this.graphics;n=(n=n.quadrant)&&n.graphics.container;
D=h.maxZoomLimit;F.x=isNaN(c)?c=p.x:c;F.y=isNaN(b)?b=p.y:b;F.scaleX=a||(a=p.scaleX);F.scaleY=d||(d=p.scaleY);a>D&&(F.x=c=B(c,m-m/D),F.scaleX=a=D);d>D&&(F.y=b=B(b,k-k/D),F.scaleY=d=D);if(f)this.updateManager(f);else for(1<a||1<d?("zoom"===q&&this.toogleDragPan(!0),a>=p.scaleX||d>=p.scaleY?(u.push({scaleX:a,scaleY:d,x:c,y:b}),q=["zoomed","zoomIn"]):(u.pop(),p=u.slice(-1)[0],F.x=p.x,F.y=p.y,F.scaleX=p.scaleX,F.scaleY=p.scaleY,q=["zoomed","zoomOut"])):(1<u.length&&u.pop(),"pan"===q&&this.toogleDragPan(!0),
q=["zoomed","zoomOut"]),this.toogleDragPan(),D=h.canvasWidth,p=h.canvasHeight,c&&(c=F.x*=D/m),b&&(F.y*=p/k),h.canvasLeft=r.canvasLeft,h.canvasWidth=r.canvasWidth,h.canvasHeight=r.canvasHeight,h.canvasTop=r.canvasTop,h.availableHeight=r.availableHeight,h.availableWidth=r.availableWidth,this._spaceManager(),this._postSpaceManagement(),this.updateManager(),e.draw(),l.draw(),this._drawCanvas(),m={"clip-rect":h.canvasLeft+","+h.canvasTop+","+h.canvasWidth+","+h.canvasHeight},h.viewPortConfig&&this.graphics.imageContainer.attr({x:h.canvasLeft,
y:h.canvasRight}),g.imageContainer.attr(m).transform("T"+h.canvasLeft+","+h.canvasTop),g.tracker&&g.tracker.attr(m),n&&n.attr(m),h=e.getValue(0),e=e.getValue(D),g=l.getValue(0),l=l.getValue(p),0===arguments.length&&(q=T),m=0;m<q.length;m+=1)"zoomed"===q[m]&&K.raiseEvent("zoomed",{level:u.length,startX:h,startY:g,endX:e,endY:l},this.chartInstance,[this.chartInstance.id]),"zoomIn"===q[m]?K.raiseEvent("zoomedIn",{level:u.length,startX:h,startY:g,endX:e,endY:l},this.chartInstance,[this.chartInstance.id]):
"zoomOut"!==q[m]||F.isReset||K.raiseEvent("zoomedOut",{level:u.length,startX:h,startY:g,endX:e,endY:l},this.chartInstance,[this.chartInstance.id]);this.highlightPoint(!1);F.isReset=!1},getFillColor:function(c,b){b=parseFloat(b/100);0>b?b=0:1<b&&(b=1);c||(c="#FFFFFF");if(r&&!O)return b?c:"transparent";c=c.replace(/^#?([a-f0-9]+)/ig,"$1");c=g.graphics.HEXtoRGB(c);c[3]=b.toString();return"rgba("+c.join(",")+")"},_bestNeighbour:function(c){var b=this.components,a=this.config,d=b.xAxis[0],f=b.yAxis[0],
h=this.jsonData.chart,e=a.canvasLeft,g=a.canvasTop,l,m,n,p,k,D,q,u,r,t,x,v;v=b.numberFormatter;r=b.dataset;for(l=r.length-1;0<=l;--l)if(b=r[l],x=b.config,m=x.showHoverEffect,u=x.showTooltip,b.components.kDTree&&b.visible&&(p=b.getElement(c),b=this._dist(c,p),!k||b<D))if(n=l,k=p,D=b,q=r[n]&&x.zoomedRadius||0,D<=q)break;D<=E(q+2,5)?(c=d.getPixel(k.x)-e,g=f.getPixel(k.y)-g,e=w(k.tooltext,x.plotToolText),b=r[n],x=b.config,r=x.tooltip.toolTipSepChar,D=x.tooltip.seriesNameInToolTip,q=k.x,l=k.y,k&&(t=v.yAxis(l),
v=v.xAxis(q),t=Number(u)?void 0!==e?ea(e,[4,5,6,7,8,9,10,11],{yaxisName:f.getAxisConfig("axisName"),xaxisName:d.getAxisConfig("axisName"),yDataValue:t,xDataValue:v},k,h,b.config):(D?x.seriesname?x.seriesname+r:"":"")+"x:"+v+r+"y:"+t:T),a.lastHoveredPoint!==k&&this.highlightPoint(m,c,g,k,n,t)):this.highlightPoint(!1)},highlightPoint:function(c,b,a,d,f,h){var e=this,z=e.config,l=e.components,m=e.graphics,n=l.paper,k=m.tracker,p=(l=l.dataset[f])&&l.config;f=l&&p.zoomedRadius||0;var q=l&&p.hoverCosmetics,
l=q&&q.fill,p=q&&q.borderColor,q=q&&q.borderThickness,r={},r=function(a){g.plotEventHandler.call(this,e,a)},u=function(a){g.plotEventHandler.call(this,e,a,"dataplotRollover")},t=function(a){g.plotEventHandler.call(this,e,a,"dataplotRollout")},w=d&&d.link;k||(k=m.tracker=n.circle(0,0,0,m.trackerGroup).attr({"clip-rect":z.canvasLeft+","+z.canvasTop+","+z.canvasWidth+","+z.canvasHeight}).click(r).trackTooltip(!0).hover(u,t));d&&k.data("eventArgs",{x:d.x,y:d.y,tooltip:h,link:w});z.lastHoveredPoint=d;
r=Number(c)?{r:f,fill:l,stroke:p,"stroke-width":q}:{r:f,fill:P,stroke:P,"stroke-width":0};r.cursor=w?"pointer":"";k.attr(r).tooltip(h).transform("t"+(b+z.canvasLeft)+","+(a+z.canvasTop));d&&v("mouseover",k&&k.node,z.lastMouseEvent)},zoom:function(c){var b,a,d=this.config,f=d.viewPortConfig;b=f.x;a=f.y;var h=d.canvasWidth,d=d.canvasHeight,e=h/f.scaleX,g=d/f.scaleY,f=e*c;c*=g;f=f>h?h:f;c=c>d?d:c;b=b+e/2-f/2;a=a+g/2-c/2;b=0>b?0:b;a=0>a?0:a;b=b+f>h?h-f:b;a=a+c>d?d-c:a;this.zoomSelection(b,a,f,c)},updateButtonVisual:function(){var c,
b,a,d;a=this.config;var f=this.components.tb.graphics;c=a.status;var h;1>=a.viewPortHistory.length?(a=["zoomOutButton","resetButton","togglePanButton"],d=["zoomInButton"],h="toggleZoomInButton"):(d=["resetButton","zoomOutButton","zoomInButton"],a=[],"zoom"===c?(d.push("togglePanButton"),h="toggleZoomInButton"):"pan"===c&&(d.push("toggleZoomInButton"),h="togglePanButton"));for(c=0;c<a.length;c+=1)b=a[c],f[b].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"},
normal:{fill:"#FFFFFF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],"button-disabled":!1,stroke:"#E3E3E3","stroke-opacity":1});for(c=0;c<d.length;c+=1)b=d[c],f[b].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#aaaaaa",cursor:"pointer"},normal:{fill:"#FFFFFF",
stroke:"#C2C2C2","stroke-width":1,cursor:"pointer"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"pointer"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#C2C2C2",cursor:"pointer"}},"button-disabled":!1,fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],stroke:"#C2C2C2","stroke-opacity":1});f[h].node.attr({config:{hover:{fill:"#EFEFEF","stroke-width":1,stroke:"#EFEFEF",cursor:"default"},normal:{fill:"#EFEFEF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},
disable:{fill:"#E6E6E6","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},"button-disabled":!1,fill:["#EFEFEF","#EFEFEF","#EFEFEF","#EFEFEF",!0],stroke:"#E3E3E3","stroke-opacity":1})},_drawAxis:function(){}},p.scatterBase);N.register("component",["dataset","zoomscatter",{type:"zoomscatter",configure:function(){var c,b,a,d,f,h,e;h=this.chart;var g=h.config;d=h.jsonData.chart;var l=h.getFillColor,m=this.JSONData;
this.__base__.configure.call(this);h=this.config;b=this.components;c=w(m.anchorbordercolor,d.anchorbordercolor);h.anchorBorderThickness=w(m.anchorborderthickness,d.anchorborderthickness,c?1:0);b.kDTree=new da;h.chunkSize=Math.floor(B((m.data||[]).length/5,5E4));c=h.staticRadius=I(d.staticradius,0);h.radius=I(m.radius,m.anchorradius,d.radius,d.anchorradius,c?3:.5);e=h.showHoverEffect;c=q(w(m.plotfillhovercolor,m.hovercolor,d.plotfillhovercolor,d.hovercolor,h.anchorbgcolor));b=w(m.plotfillhoveralpha,
m.hoveralpha,d.plotfillhoveralpha,d.hoveralpha,t);a=q(w(m.plotfillhovercolor,m.hovercolor,d.plotfillhovercolor,d.hovercolor,c));f=w(m.plotfillhoveralpha,m.hoveralpha,d.plotfillhoveralpha,d.hoveralpha,t);d=I(m.borderhoverthickness,d.borderhoverthickness,1);h.hoverCosmetics={showHoverEffect:e,fill:l(c,b),borderColor:l(a,f),borderThickness:d};h.tooltip={toolTipVisible:g.showtooltip,seriesNameInToolTip:g.seriesnameintooltip,toolTipSepChar:g.tooltipsepchar};h.lastViewPort={}},draw:function(c){var b,a,
d;b=this.graphics;d=this.chart;a=d.components;var f=d.graphics.imageContainer,h=a.paper;d=d.config;var e=this.visible,g=d.viewPortConfig,l=this.config,m=l.lastViewPort||{},n=!1;b.container||(b.container=h.group("grid-container",f));e&&this._conatinerHidden?this.show():e||this._conatinerHidden||this.hide();if(c)this._pixelatedDraw();else{if(m.scaleX!==g.scaleX||m.scaleY!==g.scaleY)m.scaleX=g.scaleX,m.scaleY=g.scaleY,c=a.xAxis[0],b=a.yAxis[0],a=c.getPVR(),c=b.getPVR(),d=E(l.zoomedRadius=B(l.staticRadius?
l.radius:l.radius*B(g.scaleX,g.scaleY),d.canvasWidth/2,d.canvasHeight/2),2),this.components.kDTree._setSearchLimit(d/a,d/c),this._deleteGridImages(),this.graphics._grid={},n=!0;this._gridDraw(n)}},_pixelatedDraw:function(){var c,b,a,d,f,h=this.chart.config;a=this.config;d=this.graphics;var e=a.drawLine,g=a.lastViewPort||{},l=g.scaleX,m=g.scaleY;f=h.viewPortConfig;var n=f.scaleX,k=f.scaleY,g=this.graphics._grid||(this.graphics._grid=[]),l=n/l,m=k/m,k=h.canvasWidth*l,h=h.canvasHeight*m;a=a._batchDarwTimers;
d=d.container;clearTimeout(this.timer);if(a&&a.length)for(;a.length;)clearTimeout(a.shift());d.transform("t"+A(-f.x*f.scaleX)+","+A(-f.y*f.scaleY));for(c in g)if(f=g[c])for(b in f)(d=f[b])&&d.drawState&&(a=d.image,a.attr({x:d.xPixel*l,y:d.yPixel*m,width:k,height:h}),e&&(a=d.lineImage,a.attr({x:d.xPixel*l,y:d.yPixel*m,width:k,height:h})))},_deleteGridImages:function(){var c,b,a,d,f;b=this.config;var h=this.graphics,e=h._imagePool||(h._imagePool=[]),g=h._canvasPool||(h._canvasPool=[]),l=h._lineImagePool||
(h._lineImagePool=[]),m=h._lineCanvasPool||(h._lineCanvasPool=[]),n=h._grid||[];if((b=b._batchDarwTimers)&&b.length)for(;b.length;)clearTimeout(b.shift());for(a in n)if(f=n[a])for(d in f)(b=f[d])&&b.drawState&&(c=b.image,c.attr({src:"",width:0,height:0}),e.push(c),delete b.image,c=b.canvas,g.push(c),delete b.canvas,delete b.ctx,c=b.lineImage)&&(c.attr({src:"",width:0,height:0}),l.push(c),delete b.lineImage,c=b.lineCanvas,m.push(c),delete b.lineCanvas,delete b.lineCtx);delete h._grid},_gridDraw:function(c){var b=
this,a=b.graphics,d=b.config,f=b.chart.config.viewPortConfig;clearTimeout(d.timer);a.container.transform("t"+A(-f.x*f.scaleX)+","+A(-f.y*f.scaleY));c?b._gridManager():d.timer=setTimeout(function(){b._gridManager()},10)},_gridManager:function(){var c,b,a,d,f,h,e,g,l,m=this,n=m.config,k=m.graphics._grid,p=n._drawGrid||(n._drawGrid=[]),q=m.chart,r=q.config,q=q.components;f=r.viewPortConfig;h=f.scaleX;var u=f.scaleY;e=Math.ceil(u);d=Math.ceil(h);var t=q.xAxis[0],v=q.yAxis[0],q=t.getAxisConfig("axisDimention").axisLength||
r.canvasWidth,r=r.canvasHeight,x=t.config,w=v.config,y=x.axisRange.min,x=x.axisRange.max,A=w.axisRange.min,w=w.axisRange.max,C=(x-y)/h,I=(w-A)/u;b=n.radius*B(f.scaleX,f.scaleY)+n.plotCosmetics.borderWidth;t=aa(b/(q*f.scaleX/(t.max-t.min)));v=aa(b/(r*f.scaleY/(v.max-v.min)));b=q/h;l=r/u;c=B(1,b/10,l/10);var u={},H=[];h=f.x+c;b=f.x-c+b;g=f.y+c;c=f.y+l-c;f=m._getFocusedGrid(h,g);l=u[f.row]||(u[f.row]={});l[f.col]=!0;f=m._getFocusedGrid(b,g);l=u[f.row]||(u[f.row]={});l[f.col]=!0;f=m._getFocusedGrid(b,
c);l=u[f.row]||(u[f.row]={});l[f.col]=!0;f=m._getFocusedGrid(h,c);l=u[f.row]||(u[f.row]={});l[f.col]=!0;h=m._getFocusedGrid();f=h.row;h=h.col;b=E(f-1,0);f=B(f+1,e-1);e=E(h-1,0);h=B(h+1,d-1);d=w-b*I;for(g=b;g<=f;g+=1){k[g]||(k[g]={});b=y+e*C;for(l=e;l<=h;l+=1)c=k[g][l],c||(a=E(d-I,A),c=B(b+C,x),c=k[g][l]={xPixel:l*q,yPixel:g*r,xMinValue:b,yMinValue:a,xMaxValue:c,yMaxValue:d,drawState:0,xMinWPad:E(b-t,y),yMinWPad:E(a-v,A),xMaxWPad:B(c+t,x),yMaxWPad:B(d+v,w)}),c.drawState||(u[g]&&u[g][l]?p.push({row:g,
col:l}):H.push({row:g,col:l})),b+=C;d-=I}(p.length||H.length)&&m._drawGridArr(function(){n._drawGrid=H;m._drawGridArr()})},_getFocusedGrid:function(c,b){var a=this.chart.config,d=a.viewPortConfig,f=a.canvasWidth/d.scaleX,a=a.canvasHeight/d.scaleY,e=isNaN(c)?d.x+f/2:c,d=isNaN(b)?d.y+a/2:b;return{row:ca(d/a),col:ca(e/f)}},_drawGridArr:function(c){var b,a,d,f,e=this.chart;b=e.config;var g=e.components,n=b.viewPortConfig,l=this.config,m=l.drawLine,k=l._drawGrid,p=[],q=this.graphics.container,r=g.paper,
g=g.xAxis[0].getAxisConfig("axisDimention").axisLength||b.canvasWidth,t=b.canvasHeight,u=this.graphics._grid,v=this.graphics._imagePool||[],w=this.graphics._canvasPool||[],x=this.graphics._lineImagePool||[],y=this.graphics._lineCanvasPool||[],A=l.plotCosmetics,n=l.radius*B(n.scaleX,n.scaleY),e=(e.components.xAxis[0].getAxisConfig("axisDimention").x||b.canvasLeft)-b.canvasLeft;if(k.length){for(;k.length;)b=k.shift(),b=u[b.row][b.col],2!==b.drawState&&(b.drawState=2,m&&(b.lineImage=x.length?x.shift():
r.image("",q),b.lineImage.attr({x:b.xPixel+e,y:b.yPixel,width:g,height:t}),b.lineCanvas=w.length?d=y.shift():d=W.document.createElement("canvas"),d.setAttribute("width",g),d.setAttribute("height",t),f=b.lineCtx=d.getContext("2d"),f.fillStyle=A.fillStyle,f.strokeStyle=A.lineStrokeStyle,f.lineWidth=A.lineWidth),b.image=v.length?v.shift():r.image("",q),b.image.attr({x:b.xPixel+e,y:b.yPixel,width:g,height:t}),b.canvas=w.length?a=w.shift():a=W.document.createElement("canvas"),a.setAttribute("width",g),
a.setAttribute("height",t),f=b.ctx=a.getContext("2d"),1>n?(f.strokeStyle=A.fillStyle,f.lineWidth=.5):(f.fillStyle=A.fillStyle,f.strokeStyle=A.strokeStyle,f.lineWidth=A.borderWidth),p.push(b));l._batchDrawindex=this.JSONData.data&&this.JSONData.data.length-1||0;this._drawGridArrBatch(p,c,!l.animation.enabled)}else c&&c()},_drawGridArrBatch:function(c,b,a){var d,f,e,g,n,l,m,k,p,q,r,t,u,v,w,x,y=this;l=y.config;var B=y.chart.components;x=y.config;var C=x.drawLine;k=x.plotCosmetics;g=x._batchDrawindex;
e=y.components.data;n=g-x.chunkSize;var E=B.yAxis[0],I=x.zoomedRadius,B=B.xAxis[0].getPVR(),E=E.getPVR(),J=l.showRegressionLine,K=x._store||[],L=k.lineWidth||1>I;J&&(v=l.regLineColor,w=l.regressionLineThickness);for(k=0;k<c.length;k+=1)c[k].ctx.beginPath(),C&&c[k].lineCtx.beginPath();for(n=0>=n?0:n;g>=n;--g)if((r=e[g]&&e[g].config.setValue)&&!isNaN(r.x)&&!isNaN(r.y))for(k=0;k<c.length;k+=1)(d=c[k],t=d.xMinValue,u=d.yMaxValue,r.x<d.xMinWPad||r.x>d.xMaxWPad||r.y<d.yMinWPad||r.y>d.yMaxWPad||(p=d.ctx,
q=d.lineCtx,d=A((r.x-t)*B),f=A((u-r.y)*E),(m=K[d])||(m=K[d]={}),m[f]))||(m[f]=!0,C&&(m=0<=g-1&&e[g-1].config.setValue)&&(q.moveTo(A((m.x-t)*B),A((u-m.y)*E)),q.lineTo(d,f)),1>I?(p.moveTo(d,f),p.lineTo(d+1,f)):(p.moveTo(d+I,f),p.arc(d,f,I,0,H)));for(k=0;k<c.length;k+=1)d=c[k],p=d.ctx,p.fill(),L&&p.stroke(),p.closePath(),C&&(q=d.lineCtx,q.fill(),L&&q.stroke(),q.closePath());x._batchDrawindex=g;if(0<=g){if(!a)for(k=0;k<c.length;k+=1)p=c[k].image,e=c[k].canvas,p.attr({src:e.toDataURL("image/png")}),x.drawLine&&
(v=c[k].lineImage,w=c[k].lineCanvas,v.attr({src:w.toDataURL("image/png")}));(x._batchDarwTimers||(x._batchDarwTimers=[])).push(setTimeout(function(){y.chart&&y._drawGridArrBatch(c,b,a)},0))}else{delete x._store;if(J)for(x=l.regressionData,k=0;k<c.length;k+=1)d=c[k],g=d.xMinValue,l=d.yMaxValue,p=d.image,e=d.canvas,p=d.ctx,e=(x[0].x-g)*B,n=(l-x[0].y)*E,g=(x[1].x-g)*B,l=(l-x[1].y)*E,p.beginPath(),p.strokeStyle=v,p.lineWidth=w,p.moveTo(e,n),p.lineTo(g,l),p.stroke(),p.closePath();for(k=0;k<c.length;k+=
1)d=c[k],p=d.image,e=d.canvas,d.drawState=1,p.attr({src:e.toDataURL("image/png")}),C&&(v=d.lineImage,w=d.lineCanvas,v.attr({src:w.toDataURL("image/png")}));y.tree||setTimeout(function(){y._buildKdTree()},250);b&&b()}},_buildKdTree:function(){var c=this.config;c._kdPoints=(this.JSONData.data||[]).slice();this.components.kDTree||(this.components.kDTree=new da);this.components.kDTree.buildKdTree(c._kdPoints);delete c._kdPoints},getElement:function(c){if(this.components.kDTree)return this.components.kDTree.getNeighbour(c)},
show:function(){var c=this.graphics,c=c&&c.container;this.visible=!0;this._conatinerHidden=!1;c.show()},hide:function(){var c=this.graphics,c=c&&c.container;this.visible=!1;this._conatinerHidden=!0;c.hide()},_addLegend:function(){var c=this.chart,b=c.jsonData.chart,a=this.config,d=this.JSONData,f=c.getFillColor,g=w(d.anchorbordercolor,b.anchorbordercolor),k=q(w(g,a.plotBorderColor)),g=I(d.anchorborderthickness,b.anchorborderthickness,g?1:0),p=q(w(d.anchorbgcolor,d.color,b.anchorbgcolor,a.plotColor)),
l=w(d.anchoralpha,d.alpha,b.anchoralpha,t),b=w(d.anchorbgalpha,d.alpha,b.anchorbgalpha,t),d={color:a.lineColor,alpha:a.lineAlpha},f=a.plotCosmetics={fillStyle:f(p,l*b/100),strokeStyle:f(k,l),borderWidth:g,lineWidth:a.lineThickness,lineStrokeStyle:n(d)};this.legendItemId=c.components.legend.addItems(this,this.legendInteractivity,{enabled:a.includeInLegend,type:this.type,fillColor:f.fillStyle,strokeColor:f.strokeStyle,anchorSide:2,strokeWidth:a.anchorBorderThickness,label:e(this.JSONData.seriesname)})},
_setConfigure:function(){var c,b,a,d,f,e,k,n,l,m=-Infinity,p=Infinity,q=Infinity,r=-Infinity,t=this.components.data||(this.components.data=[]);c=this.chart;var v=g.parseUnsafeString,u=this.config,y=this.JSONData,A=c.jsonData.chart,x=y.data||[],C=x.length,H=c.components.numberFormatter,J=v(A.yaxisname),K=v(A.xaxisname),L=u.lineDashed,N=u.lineDashStyle,M=u.parentYAxis,O=u.toolTipSepChar,P=u.seriesname;for(c=0;c<C;c+=1)d=x[c],a=t[c]||(t[c]={}),b=a.config||(a.config={}),b.setValue=f={x:H.getCleanValue(d.x),
y:H.getCleanValue(d.y),index:c},r=E(r,f.x),q=B(q,f.x),m=E(m,f.y),p=B(p,f.y),u.showRegressionLine&&this.pointValueWatcher(f.x,f.y,u.regressionObj),b.setLink=w(d.link),b.anchorProps=this._parseAnchorProperties(c),b.showValue=I(d.showvalue,u.showValues),b.dashed=I(d.dashed,L),b.color=w(d.color,u.lineColor),b.alpha=w(d.alpha,u.lineAlpha),b.dashStyle=b.dashed?N:"none",b.toolTipValue=e=H.dataLabels(f.y,M),b.setDisplayValue=l=v(d.displayvalue),n=b.formatedVal=w(d.toolTipValue,H.dataLabels(f.y,M)),k=H.xAxis(f.x),
b.displayValue=w(l,e),b.setTooltext=g.getValidValue(v(w(d.tooltext,u.plotToolText))),u.showTooltip?void 0!==b.setTooltext?(f=[4,5,6,7,8,9,10,11],k={yaxisName:J,xaxisName:K,yDataValue:n,xDataValue:k},d=ea(b.setTooltext,f,k,d,A,y)):null===n?d=!1:(d=P?P+O:T,d+=f.x?k+O:T,d+=e):d=!1,b.toolText=d,a?a.graphics||(t[c].graphics={}):a=t[c]={graphics:{}},b.hoverEffects=this._parseHoverEffectOptions(a),b.anchorProps.isAnchorHoverRadius=b.hoverEffects.anchorRadius;u.xMax=r;u.xMin=q;u.yMin=p;u.yMax=m;u.showRegressionLine&&
(u.regressionData=this.getRegressionLineSeries(u.regressionObj,u.showYOnX,C));this.ErrorValueConfigure&&this.ErrorValueConfigure()}},"Scatter"]);S.addSymbol({zoomInIcon:function(c,b,a){c-=.2*a;b-=.2*a;var d=.8*a,f=S.rad(43),e=S.rad(48),g=c+d*L(f),f=b+d*C(f),k=c+d*L(e),e=b+d*C(e),l=S.rad(45),m=g+a*L(l),n=f+a*C(l),p=k+a*L(l)-1;a=e+a*C(l)-1;return["M",g,f,"A",d,d,0,1,0,k,e,"Z","M",g+1,f+1,"L",m,n,p,a,k+1,e+1,"Z","M",c-2,b,"L",c+2,b,"Z","M",c,b-2,"L",c,b+2,"Z"]},zoomModeIcon:function(c,b,a){var d=[];
c-=.2*a;b-=.2*a;var f=.8*a,e=S.rad(43),g=S.rad(48),k=c+f*L(e),e=b+f*C(e),l=c+f*L(g),g=b+f*C(g),m=S.rad(45),n=k+a*L(m),p=e+a*C(m),q=l+a*L(m)-1;a=g+a*C(m)-1;return d=d.concat(["M",k,e,"A",f,f,0,1,0,l,g,"Z","M",k+1,e+1,"L",n,p,q,a,q+1,a-1,q+1.5,a+1.5,q-1,a+1,q,a,l+1,g+1,"Z","M",c-2,b,"L",c+2,b,"Z","M",c,b-2,"L",c,b+2,"Z"])},panModeIcon:function(c,b,a){var d=c-11.25,d=c;a*=2.5;return[].concat(["M",d-a/16,b-a/8,"L",d+a/16,b-a/8,"L",d+a/16,b-a/3.2,"L",d+6*a/32,b-10*a/32,"L",d,b-a/2,"L",d-6*a/32,b-10*a/
32,"L",d-a/16,b-a/3.2,"Z","M",d+4*a/32,b-2*a/32,"L",d+10*a/32,b-2*a/32,"L",d+10*a/32,b-6*a/32,"L",d+16*a/32,b,"L",d+10*a/32,b+6*a/32,"L",d+10*a/32,b+2*a/32,"L",d+4*a/32,b+2*a/32,"Z","M",d+2*a/32,b+5*a/32,"L",d+2*a/32,b+10*a/32,"L",d+6*a/32,b+10*a/32,"L",d,b+16*a/32,"L",d-6*a/32,b+10*a/32,"L",d-2*a/32,b+10*a/32,"L",d-2*a/32,b+5*a/32,"Z","M",d-4*a/32,b-2*a/32,"L",d-10*a/32,b-2*a/32,"L",d-10*a/32,b-6*a/32,"L",d-16*a/32,b,"L",d-10*a/32,b+6*a/32,"L",d-10*a/32,b+2*a/32,"L",d-4*a/32,b+2*a/32,"Z"])}})}])});
